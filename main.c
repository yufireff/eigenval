#include "matrix.h"
#include "eig.h"
#include "settings.h"
#include "MatrixSpecial.h"
#include "MatrixDsp.h"

int main(void)
{
	/*float aData[4*4] =
	{
		1.5, 4.6, 7.4, 2.5,
		8.1, 0.4, 3.5, 1.4,
		3.3, 2.2, 1.7, 7.2,
		1.6, 2.0, 2.7, 3.2
	};
	float aImData[4*4] =
	{
		4.3, 9.5, 2.8, 0.5,
		3.5, 2.1, 1.7, 7.2,
		1.6, 4.2, 6.6, 3.4,
		2.8, 3.0, 9.3, 5.5
	}
	float bData[16], bImData[16];
	//float one = 1.0f;
	CMatrix_t Ac, Bc;
	Ac.numRows = 4;
	Ac.numCols = 4;
	Ac.pDataReal = (float*)aData;
	Ac.pDataImag = (float*)aImData;
	Bc.numRows = 4;
	Bc.numCols = 4;
	Bc.pDataReal = (float*)bData;
	Bc.pDataImag = (float*)bImData;
#ifdef DSP_OPTIMIZATION
	inv_dsp(&Ac, &Bc, 0);
#else
	inv(&Ac, &Bc);
#endif*/
	float aData[3*2] =
	{
		1.5, 4.6,
		7.4, 8.1,
		0.4, 3.5
	};

	float bData[3*4] =
	{
		4.3, 9.5, 2.8, 1.6,
		3.3, 2.2, 1.7, 5.6,
		4.1, 0.3, 6.0, 2.8
	};

	float aImData[3*2] =
	{
		2.6, 1.3,
		0.8, 5.8,
		9.2, 7.3
	};

	float bImData[3*4] =
	{
		0.3, 2.7, 0.5, 4.2,
		2.2, 4.5, 8.1, 0.4,
		1.6, 4.2, 6.6, 2.8
	};

	float cData[2*4], cImData[2*4];

	Matrix_t A, B, C;
	CMatrix_t Ac, Bc, Cc;
	Ac.numRows = 3;
	Ac.numCols = 2;
	Ac.pDataReal = aData;
	Ac.pDataImag = aImData;
	Bc.numRows = 3;
	Bc.numCols = 4;
	Bc.pDataReal = bData;
	Bc.pDataImag = bImData;
	Cc.numRows = 2;
	Cc.numCols = 4;
	Cc.pDataReal = cData;
	Cc.pDataImag = cImData;

	A.numRows = 3;
	A.numCols = 2;
	A.pData = aData;
	B.numRows = 3;
	B.numCols = 4;
	B.pData = bData;
	C.numRows = 2;
	C.numCols = 4;
	C.pData = cData;
#ifdef DSP_OPTIMIZATION
	//real_matrix_mult_left_transp_dsp(&A, &B, 1.2f, &C, 0);
	complex_matrix_mult_left_transp_dsp(&Ac, &Bc, &Cc, 0);
#else // DSP_OPTIMIZATION
	real_matrix_mult_left_transp(&A, &B, 1.2f, &C);
#endif // DSP_OPTIMIZATION
	//real_matrix_mult_dsp(&A, &B, 1.2f, &C, 0);
	//complex_matrix_mult_dsp(&Ac, &Bc, 1.0f, 0.0f, &Cc, 0);

	/*

#define N 20

	REAL_TYPE realA[N*N] =
	{
		0.999765, 0.991914, 0.872148, 0.408834, 0.993450, 0.971530, 0.812188, 0.304506, 0.974776, 0.939018, 0.742083, 0.196388, 0.943995, 0.894795, 0.662712, 0.085803, 0.901397, 0.839398, 0.575070, -0.025853,
		0.991914, 1.000521, 0.927604, 0.521792, 0.999905, 0.994207, 0.880097, 0.423354, 0.995441, 0.975506, 0.821602, 0.319640, 0.978568, 0.944703, 0.752851, 0.211918, 0.949443, 0.902077, 0.674701, 0.101553,
		0.872148, 0.927604, 1.000021, 0.802829, 0.921222, 0.963530, 0.993720, 0.731325, 0.958815, 0.987434, 0.975030, 0.650699, 0.984438, 0.999044, 0.944229, 0.561932, 0.997767, 0.998154, 0.901622, 0.466151,
		0.408834, 0.521792, 0.802829, 1.000075, 0.508054, 0.613716, 0.864318, 0.993771, 0.600945, 0.697981, 0.915018, 0.975084, 0.686321, 0.773540, 0.954312, 0.944270, 0.763141, 0.839441, 0.981676, 0.901649,
		0.993450, 0.999905, 0.921222, 0.508054, 0.999765, 0.991914, 0.872148, 0.408834, 0.993450, 0.971530, 0.812188, 0.304506, 0.974776, 0.939018, 0.742083, 0.196388, 0.943995, 0.894795, 0.662712, 0.085803,
		0.971530, 0.994207, 0.963530, 0.613716, 0.991914, 1.000521, 0.927604, 0.521792, 0.999905, 0.994207, 0.880097, 0.423354, 0.995441, 0.975506, 0.821602, 0.319640, 0.978568, 0.944703, 0.752851, 0.211918,
		0.812188, 0.880097, 0.993720, 0.864318, 0.872148, 0.927604, 1.000021, 0.802829, 0.921222, 0.963530, 0.993720, 0.731325, 0.958815, 0.987434, 0.975030, 0.650699, 0.984438, 0.999044, 0.944229, 0.561932,
		0.304506, 0.423354, 0.731325, 0.993771, 0.408834, 0.521792, 0.802829, 1.000075, 0.508054, 0.613716, 0.864318, 0.993771, 0.600945, 0.697981, 0.915018, 0.975084, 0.686321, 0.773540, 0.954312, 0.944270,
		0.974776, 0.995441, 0.958815, 0.600945, 0.993450, 0.999905, 0.921222, 0.508054, 0.999765, 0.991914, 0.872148, 0.408834, 0.993450, 0.971530, 0.812188, 0.304506, 0.974776, 0.939018, 0.742083, 0.196388,
		0.939018, 0.975506, 0.987434, 0.697981, 0.971530, 0.994207, 0.963530, 0.613716, 0.991914, 1.000521, 0.927604, 0.521792, 0.999905, 0.994207, 0.880097, 0.423354, 0.995441, 0.975506, 0.821602, 0.319640,
		0.742083, 0.821602, 0.975030, 0.915018, 0.812188, 0.880097, 0.993720, 0.864318, 0.872148, 0.927604, 1.000021, 0.802829, 0.921222, 0.963530, 0.993720, 0.731325, 0.958815, 0.987434, 0.975030, 0.650699,
		0.196388, 0.319640, 0.650699, 0.975084, 0.304506, 0.423354, 0.731325, 0.993771, 0.408834, 0.521792, 0.802829, 1.000075, 0.508054, 0.613716, 0.864318, 0.993771, 0.600945, 0.697981, 0.915018, 0.975084,
		0.943995, 0.978568, 0.984438, 0.686321, 0.974776, 0.995441, 0.958815, 0.600945, 0.993450, 0.999905, 0.921222, 0.508054, 0.999765, 0.991914, 0.872148, 0.408834, 0.993450, 0.971530, 0.812188, 0.304506,
		0.894795, 0.944703, 0.999044, 0.773540, 0.939018, 0.975506, 0.987434, 0.697981, 0.971530, 0.994207, 0.963530, 0.613716, 0.991914, 1.000521, 0.927604, 0.521792, 0.999905, 0.994207, 0.880097, 0.423354,
		0.662712, 0.752851, 0.944229, 0.954312, 0.742083, 0.821602, 0.975030, 0.915018, 0.812188, 0.880097, 0.993720, 0.864318, 0.872148, 0.927604, 1.000021, 0.802829, 0.921222, 0.963530, 0.993720, 0.731325,
		0.085803, 0.211918, 0.561932, 0.944270, 0.196388, 0.319640, 0.650699, 0.975084, 0.304506, 0.423354, 0.731325, 0.993771, 0.408834, 0.521792, 0.802829, 1.000075, 0.508054, 0.613716, 0.864318, 0.993771,
		0.901397, 0.949443, 0.997767, 0.763141, 0.943995, 0.978568, 0.984438, 0.686321, 0.974776, 0.995441, 0.958815, 0.600945, 0.993450, 0.999905, 0.921222, 0.508054, 0.999765, 0.991914, 0.872148, 0.408834,
		0.839398, 0.902077, 0.998154, 0.839441, 0.894795, 0.944703, 0.999044, 0.773540, 0.939018, 0.975506, 0.987434, 0.697981, 0.971530, 0.994207, 0.963530, 0.613716, 0.991914, 1.000521, 0.927604, 0.521792,
		0.575070, 0.674701, 0.901622, 0.981676, 0.662712, 0.752851, 0.944229, 0.954312, 0.742083, 0.821602, 0.975030, 0.915018, 0.812188, 0.880097, 0.993720, 0.864318, 0.872148, 0.927604, 1.000021, 0.802829,
		-0.025853, 0.101553, 0.466151, 0.901649, 0.085803, 0.211918, 0.561932, 0.944270, 0.196388, 0.319640, 0.650699, 0.975084, 0.304506, 0.423354, 0.731325, 0.993771, 0.408834, 0.521792, 0.802829, 1.000075
	};

	REAL_TYPE imagA[N*N] =
	{
		0.000000, -0.127230, -0.488805, -0.912405, -0.111501, -0.237079, -0.583046, -0.952318, -0.221624, -0.343971, -0.670007, -0.980341, -0.328968, -0.446575, -0.748599, -0.996118, -0.432220, -0.543598, -0.817854, -0.999461,
		0.127230, 0.000000, -0.374015, -0.853298, 0.015792, -0.111587, -0.475154, -0.906181, -0.095841, -0.221788, -0.570360, -0.947748, -0.206275, -0.329227, -0.658445, -0.977476, -0.314151, -0.432555, -0.738324, -0.995004,
		0.488805, 0.374015, 0.000000, -0.596115, 0.388470, 0.268212, -0.111537, -0.681950, 0.283285, 0.159064, -0.221683, -0.759266, 0.174575, 0.047921, -0.329061, -0.827102, 0.063672, -0.063826, -0.432341, -0.884616,
		0.912405, 0.853298, 0.596115, 0.000000, 0.861104, 0.789771, 0.502845, -0.111541, 0.799064, 0.716383, 0.403296, -0.221687, 0.727055, 0.634054, 0.298710, -0.329077, 0.645956, 0.543811, 0.190387, -0.432352,
		0.111501, -0.015792, -0.388470, -0.861104, 0.000000, -0.127230, -0.488805, -0.912405, -0.111501, -0.237079, -0.583046, -0.952318, -0.221624, -0.343971, -0.670007, -0.980341, -0.328968, -0.446575, -0.748599, -0.996118,
		0.237079, 0.111587, -0.268212, -0.789771, 0.127230, 0.000000, -0.374015, -0.853298, 0.015792, -0.111587, -0.475154, -0.906181, -0.095841, -0.221788, -0.570360, -0.947748, -0.206275, -0.329227, -0.658445, -0.977476,
		0.583046, 0.475154, 0.111537, -0.502845, 0.488805, 0.374015, 0.000000, -0.596115, 0.388470, 0.268212, -0.111537, -0.681950, 0.283285, 0.159064, -0.221683, -0.759266, 0.174575, 0.047921, -0.329061, -0.827102,
		0.952318, 0.906181, 0.681950, 0.111541, 0.912405, 0.853298, 0.596115, 0.000000, 0.861104, 0.789771, 0.502845, -0.111541, 0.799064, 0.716383, 0.403296, -0.221687, 0.727055, 0.634054, 0.298710, -0.329077,
		0.221624, 0.095841, -0.283285, -0.799064, 0.111501, -0.015792, -0.388470, -0.861104, 0.000000, -0.127230, -0.488805, -0.912405, -0.111501, -0.237079, -0.583046, -0.952318, -0.221624, -0.343971, -0.670007, -0.980341,
		0.343971, 0.221788, -0.159064, -0.716383, 0.237079, 0.111587, -0.268212, -0.789771, 0.127230, 0.000000, -0.374015, -0.853298, 0.015792, -0.111587, -0.475154, -0.906181, -0.095841, -0.221788, -0.570360, -0.947748,
		0.670007, 0.570360, 0.221683, -0.403296, 0.583046, 0.475154, 0.111537, -0.502845, 0.488805, 0.374015, 0.000000, -0.596115, 0.388470, 0.268212, -0.111537, -0.681950, 0.283285, 0.159064, -0.221683, -0.759266,
		0.980341, 0.947748, 0.759266, 0.221687, 0.952318, 0.906181, 0.681950, 0.111541, 0.912405, 0.853298, 0.596115, 0.000000, 0.861104, 0.789771, 0.502845, -0.111541, 0.799064, 0.716383, 0.403296, -0.221687,
		0.328968, 0.206275, -0.174575, -0.727055, 0.221624, 0.095841, -0.283285, -0.799064, 0.111501, -0.015792, -0.388470, -0.861104, 0.000000, -0.127230, -0.488805, -0.912405, -0.111501, -0.237079, -0.583046, -0.952318,
		0.446575, 0.329227, -0.047921, -0.634054, 0.343971, 0.221788, -0.159064, -0.716383, 0.237079, 0.111587, -0.268212, -0.789771, 0.127230, 0.000000, -0.374015, -0.853298, 0.015792, -0.111587, -0.475154, -0.906181,
		0.748599, 0.658445, 0.329061, -0.298710, 0.670007, 0.570360, 0.221683, -0.403296, 0.583046, 0.475154, 0.111537, -0.502845, 0.488805, 0.374015, 0.000000, -0.596115, 0.388470, 0.268212, -0.111537, -0.681950,
		0.996118, 0.977476, 0.827102, 0.329077, 0.980341, 0.947748, 0.759266, 0.221687, 0.952318, 0.906181, 0.681950, 0.111541, 0.912405, 0.853298, 0.596115, 0.000000, 0.861104, 0.789771, 0.502845, -0.111541,
		0.432220, 0.314151, -0.063672, -0.645956, 0.328968, 0.206275, -0.174575, -0.727055, 0.221624, 0.095841, -0.283285, -0.799064, 0.111501, -0.015792, -0.388470, -0.861104, 0.000000, -0.127230, -0.488805, -0.912405,
		0.543598, 0.432555, 0.063826, -0.543811, 0.446575, 0.329227, -0.047921, -0.634054, 0.343971, 0.221788, -0.159064, -0.716383, 0.237079, 0.111587, -0.268212, -0.789771, 0.127230, 0.000000, -0.374015, -0.853298,
		0.817854, 0.738324, 0.432341, -0.190387, 0.748599, 0.658445, 0.329061, -0.298710, 0.670007, 0.570360, 0.221683, -0.403296, 0.583046, 0.475154, 0.111537, -0.502845, 0.488805, 0.374015, 0.000000, -0.596115,
		0.999461, 0.995004, 0.884616, 0.432352, 0.996118, 0.977476, 0.827102, 0.329077, 0.980341, 0.947748, 0.759266, 0.221687, 0.952318, 0.906181, 0.681950, 0.111541, 0.912405, 0.853298, 0.596115, 0.000000
	};

	REAL_TYPE realAInv[N * N], imagAInv[N * N];
	REAL_TYPE dataS[N], realU[N][N], imagU[N][N];

	CMatrix_t A;
	CMatrix_t AInv;

	Matrix_t S;
	CMatrix_t U;

	REAL_TYPE lambda;

	A.numRows = N;
	A.numCols = N;
	A.pDataReal = realA;
	A.pDataImag = imagA;

	AInv.numRows = N;
	AInv.numCols = N;
	AInv.pDataReal = realAInv;
	AInv.pDataImag = imagAInv;

	S.numRows = 1;
	S.numCols = N;
	S.pData = dataS;

	U.numRows = N;
	U.numCols = 1;
	U.pDataReal = realU[0];
	U.pDataImag = imagU[0];

//	inv(&A, &AInv);

	real_new(1, N, &S);
	complex_new(N, N, &U);

	eig_symm_triag(&A, 0.01f, &S, &U);
	//lambda = eig_symm_triag_only_one(&A, 0.01f, &U);
*/
    return 0;
}
